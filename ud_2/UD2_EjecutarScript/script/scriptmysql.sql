
/* ******** TABLAS ALUMNOS, ASIGNATURAS, NOTAS:  MySQL********** */

SET FOREIGN_KEY_CHECKS = 0; 
drop table if EXISTS notas;
drop table if EXISTS alumnos;
drop table if EXISTS asignaturas;

CREATE TABLE IF NOT EXISTS ALUMNOS
(
  DNI VARCHAR(10) NOT NULL primary key,
  APENOM VARCHAR(30),
  DIREC VARCHAR(30),
  POBLA  VARCHAR(15),
  TELEF  VARCHAR(10)  
) ;

CREATE TABLE IF NOT EXISTS ASIGNATURAS
(
  COD int NOT NULL primary key,
  NOMBRE VARCHAR(25)
) ;

CREATE TABLE IF NOT EXISTS NOTAS
(
  DNI VARCHAR(10) NOT NULL ,
  COD int NOT NULL ,
  NOTA int, 
  primary key(DNI,COD)
);

/* Create Foreign Keys */

ALTER TABLE NOTAS
	ADD CONSTRAINT FKNOTASALUM FOREIGN KEY (DNI)
	REFERENCES ALUMNOS (DNI)
	ON UPDATE CASCADE
	ON DELETE RESTRICT;


ALTER TABLE NOTAS
	ADD CONSTRAINT FKNOTASASIG FOREIGN KEY (COD)
	REFERENCES ASIGNATURAS (COD)
	ON UPDATE CASCADE
	ON DELETE RESTRICT;

	
INSERT IGNORE INTO ASIGNATURAS VALUES (1,'Prog. Leng. Estr.');
INSERT IGNORE INTO ASIGNATURAS VALUES (2,'Sist. Informáticos');
INSERT IGNORE INTO ASIGNATURAS VALUES (3,'Análisis');
INSERT IGNORE INTO ASIGNATURAS VALUES (4,'FOL');
INSERT IGNORE INTO ASIGNATURAS VALUES (5,'RET');
INSERT IGNORE INTO ASIGNATURAS VALUES (6,'Entornos Gráficos');
INSERT IGNORE INTO ASIGNATURAS VALUES (7,'Aplic. Entornos 4ªGen');
INSERT IGNORE INTO ASIGNATURAS VALUES (8,'Idioma');


INSERT IGNORE INTO ALUMNOS VALUES
('12344345','Alcalde García, Elena', 'C/Las Matas, 24','Madrid','917766545');

INSERT IGNORE INTO ALUMNOS VALUES
('4448242','Cerrato Vela, Luis', 'C/Mina 28 - 3A', 'Madrid','916566545');

INSERT  IGNORE INTO ALUMNOS VALUES
('56882942','Díaz Fernández, María', 'C/Luis Vives 25', 'Móstoles','915577545');

INSERT IGNORE INTO NOTAS VALUES('12344345', 1,6);
INSERT IGNORE INTO NOTAS VALUES('12344345', 2,5);
INSERT IGNORE INTO NOTAS VALUES('12344345', 3,6);

INSERT IGNORE INTO NOTAS VALUES('4448242', 4,6);
INSERT IGNORE INTO NOTAS VALUES('4448242', 5,8);
INSERT IGNORE INTO NOTAS VALUES('4448242', 6,4);
INSERT IGNORE INTO NOTAS VALUES('4448242', 7,5);

INSERT IGNORE INTO NOTAS VALUES('56882942', 4,8);
INSERT IGNORE INTO NOTAS VALUES('56882942', 5,7);
INSERT IGNORE INTO NOTAS VALUES('56882942', 6,8);
INSERT IGNORE INTO NOTAS VALUES('56882942', 7,9);

commit;



-- ******** FIN ***********************

